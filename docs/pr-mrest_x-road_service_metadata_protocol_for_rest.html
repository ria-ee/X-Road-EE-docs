<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="github-markdown.css">
    <style>
      .markdown-body {
        box-sizing: border-box;
        min-width: 200px;
        max-width: 980px;
        margin: 0 auto;
        padding: 45px;
      }
    </style>
    <title>X-Road: 7.6.0
</title>
  </head>
  <body>
    <article class="markdown-body">
<div class="markdown-heading"><h1 class="heading-element">X-Road: Service Metadata Protocol for REST 
</h1><a id="x-road-service-metadata-protocol-for-rest-" class="anchor" aria-label="Permalink: X-Road: Service Metadata Protocol for REST " href="#x-road-service-metadata-protocol-for-rest-"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p><strong>Technical Specification</strong></p>
<p>Version: 0.7<br>
Doc. ID: PR-MREST</p>
<hr>
<div class="markdown-heading"><h2 class="heading-element">Version history 
</h2><a id="version-history-" class="anchor" aria-label="Permalink: Version history " href="#version-history-"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<table>
<thead>
<tr>
<th>Date</th>
<th>Version</th>
<th>Description</th>
<th>Author</th>
</tr>
</thead>
<tbody>
<tr>
<td>29.07.2019</td>
<td>0.1</td>
<td>Initial version</td>
<td>Ilkka Seppälä</td>
</tr>
<tr>
<td>06.08.2019</td>
<td>0.2</td>
<td>Add getOpenAPI description</td>
<td>Ilkka Seppälä</td>
</tr>
<tr>
<td>09.10.2019</td>
<td>0.3</td>
<td>Clarify the listCentralServices response type</td>
<td>Jarkko Hyöty</td>
</tr>
<tr>
<td>07.11.2019</td>
<td>0.4</td>
<td>Clarify getOpenAPI description</td>
<td>Ilkka Seppälä</td>
</tr>
<tr>
<td>05.10.2021</td>
<td>0.5</td>
<td>Update listMethods and allowedMethods</td>
<td>Ilkka Seppälä</td>
</tr>
<tr>
<td>17.04.2023</td>
<td>0.6</td>
<td>Remove central services support</td>
<td>Justas Samuolis</td>
</tr>
<tr>
<td>10.05.2023</td>
<td>0.7</td>
<td>Security Categories removed.</td>
<td>Justas Samuolis</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h2 class="heading-element">Table of Contents 
</h2><a id="table-of-contents-" class="anchor" aria-label="Permalink: Table of Contents " href="#table-of-contents-"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<ul>
<li><a href="#license">License</a></li>
<li>
<a href="#1-introduction">1 Introduction</a>
<ul>
<li><a href="#11-terms-and-abbreviations">1.1 Terms and abbreviations</a></li>
<li><a href="#12-references">1.2 References</a></li>
</ul>
</li>
<li><a href="#2-retrieving-list-of-service-providers">2 Retrieving List of Service Providers</a></li>
<li><a href="#4-retrieving-list-of-services">3 Retrieving List of Services</a></li>
<li><a href="#5-retrieving-the-openapi-description-of-a-service">4 Retrieving the OpenAPI description of a Service</a></li>
<li><a href="#annex-a-service-descriptions-for-rest-metadata-services">Annex A Service Descriptions for REST Metadata Services</a></li>
<li>
<a href="#annex-b-example-messages">Annex B Example Messages</a>
<ul>
<li><a href="#b1-listmethods-response">B.1 listMethods Response</a></li>
<li><a href="#b2-allowedmethods-response">B.2 allowedMethods Response</a></li>
<li><a href="#b3-getopenapi-response">B.3 getOpenAPI Response</a></li>
</ul>
</li>
</ul>
<div class="markdown-heading"><h2 class="heading-element">License</h2><a id="license" class="anchor" aria-label="Permalink: License" href="#license"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>This document is licensed under the Creative Commons Attribution-ShareAlike 3.0 Unported License. To view a copy of this
license, visit <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="nofollow">http://creativecommons.org/licenses/by-sa/3.0/</a></p>
<div class="markdown-heading"><h2 class="heading-element">1 Introduction</h2><a id="1-introduction" class="anchor" aria-label="Permalink: 1 Introduction" href="#1-introduction"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>X-Road Service Metadata protocol [<a href="#Ref_PR-META">PR-META</a>] describes how X-Road metaservices can be called via SOAP
interface. This specification complements it by describing REST call mechanisms.</p>
<p>REST metaservices conform to X-Road Message Protocol for REST [<a href="#Ref_PR-REST">PR-REST</a>].</p>
<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "
OPTIONAL" in this document (in uppercase, as shown) are to be interpreted as described in [<a href="#Ref_RFC2119">RFC2119</a>].</p>
<div class="markdown-heading"><h3 class="heading-element">1.1 Terms and abbreviations</h3><a id="11-terms-and-abbreviations" class="anchor" aria-label="Permalink: 1.1 Terms and abbreviations" href="#11-terms-and-abbreviations"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>See X-Road terms and abbreviations documentation [<a href="#Ref_TERMS">TA-TERMS</a>].</p>
<div class="markdown-heading"><h3 class="heading-element">1.2 References</h3><a id="12-references" class="anchor" aria-label="Permalink: 1.2 References" href="#12-references"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<ol>
<li>
<a name="Ref_PR-META"></a>[PR-META] X-Road: Service Metadata Protocol. Document ID:
<a href="pr-meta_x-road_service_metadata_protocol.html">PR-META</a>.</li>
<li>
<a name="Ref_RFC2119"></a>[RFC2119] Key words for use in RFCs to Indicate Requirement Levels,
Internet Engineering Task Force, 1997,
<a href="https://www.ietf.org/rfc/rfc2119.txt" rel="nofollow">https://www.ietf.org/rfc/rfc2119.txt</a>
</li>
<li>
<a id="Ref_TERMS"></a>[TA-TERMS] X-Road Terms and Abbreviations. Document
ID: <a href="terms_x-road_docs.html">TA-TERMS</a>.</li>
<li>
<a id="Ref_PR-REST"></a>[PR-REST] X-Road: Message Protocol for REST. Document ID:
<a href="pr-rest_x-road_message_protocol_for_rest.html">PR-REST</a>.</li>
</ol>
<div class="markdown-heading"><h2 class="heading-element">2 Retrieving List of Service Providers</h2><a id="2-retrieving-list-of-service-providers" class="anchor" aria-label="Permalink: 2 Retrieving List of Service Providers" href="#2-retrieving-list-of-service-providers"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>For retrieving the list of service providers listClients metaservice is used. It can be invoked with simple HTTP GET to
right URL. Service output format is controlled with Accept header. The details of listClients are described in
[<a href="#Ref_PR-META">PR-META</a>].</p>
<div class="markdown-heading"><h2 class="heading-element">4 Retrieving List of Services</h2><a id="4-retrieving-list-of-services" class="anchor" aria-label="Permalink: 4 Retrieving List of Services" href="#4-retrieving-list-of-services"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>X-Road provides two methods for getting the list of services and service endpoints offered by an X-Road client:</p>
<ul>
<li>
<p><code>listMethods</code> lists all REST services and service endpoints offered by a service provider.</p>
</li>
<li>
<p><code>allowedMethods</code> lists all REST services and service endpoints offered by a service provider that the caller has
permission to invoke. Notice that the endpoints may contain wildcards and the amount of concrete endpoints may
actually be larger. Generally, fetching the OpenAPI service description is the preferred method for discovering
service endpoints.</p>
</li>
</ul>
<p>Both methods are invoked as regular X-Road REST services (see specification [<a href="#Ref_PR-REST">PR-REST</a>] for details on
the X-Road REST protocol).</p>
<p>The serviceId MUST contain the identifier of the target service provider and the value of the serviceCode element MUST
be either <code>listMethods</code> or <code>allowedMethods</code>.</p>
<p>Request example</p>
<div class="highlight highlight-source-httpspec"><pre><span class="pl-k">GET</span><span class="pl-c1"> /r1/INSTANCE/CLASS2/MEMBER2/SUBSYSTEM2/listMethods</span></pre></div>
<p>HTTP request headers</p>
<div class="highlight highlight-source-httpspec"><pre><span class="pl-s"><span class="pl-v">X-Road-Client:</span> INSTANCE/CLASS1/MEMBER1/SUBSYSTEM1</span></pre></div>
<p>The body of the response message MUST contain a list of services and service endpoints provided by the service
provider (in case of listMethods) or open to the given client (in case of allowedMethods). The response SHALL NOT
contain names of the metainfo services.</p>
<p>Annex <a href="#annex-a-service-descriptions-for-rest-metadata-services">A</a> contains the OpenAPI description of the REST
metadata services.</p>
<p>Annexes <a href="#c1-listmethods-response">B.1</a> and <a href="#c2-allowedmethods-response">B.2</a> contain example response messages for
services, respectively.</p>
<div class="markdown-heading"><h2 class="heading-element">5 Retrieving the OpenAPI description of a Service</h2><a id="5-retrieving-the-openapi-description-of-a-service" class="anchor" aria-label="Permalink: 5 Retrieving the OpenAPI description of a Service" href="#5-retrieving-the-openapi-description-of-a-service"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>X-Road provides a metaservice for fetching service descriptions of REST services.</p>
<ul>
<li>
<code>getOpenAPI</code> returns the OpenAPI service description of a REST service</li>
</ul>
<p>The method is invoked as regular X-Road REST service (see specification [<a href="#Ref_PR-REST">PR-REST</a>] for details on the
X-Road REST protocol).</p>
<p>The serviceId MUST contain the identifier of the target service provider and the value of the serviceCode element MUST
be <code>getOpenAPI</code>.</p>
<p>The query parameters must contain <code>serviceCode=xxx</code> where xxx is the service code of the REST service we want to get the
service description from.</p>
<p>Request example</p>
<div class="highlight highlight-source-httpspec"><pre><span class="pl-k">GET</span><span class="pl-c1"> /r1/INSTANCE/CLASS2/MEMBER2/SUBSYSTEM2/getOpenAPI?serviceCode=listFirms</span></pre></div>
<p>HTTP request headers</p>
<div class="highlight highlight-source-httpspec"><pre><span class="pl-s"><span class="pl-v">X-Road-Client:</span> INSTANCE/CLASS1/MEMBER1/SUBSYSTEM1</span></pre></div>
<p>Note that fetching the OpenAPI service description respects the "Verify TLS Certificate" setting of the service.</p>
<p>The body of the response MUST contain the OpenAPI service description of the REST service indicated by the query
parameters.</p>
<p>Annex <a href="#annex-a-service-descriptions-for-rest-metadata-services">A</a> contains the OpenAPI description of the REST
metadata services.</p>
<p>Annex <a href="#b3-getopenapi-response">B.3</a> contains an example response message for the service.</p>
<div class="markdown-heading"><h2 class="heading-element">Annex A Service Descriptions for REST Metadata Services</h2><a id="annex-a-service-descriptions-for-rest-metadata-services" class="anchor" aria-label="Permalink: Annex A Service Descriptions for REST Metadata Services" href="#annex-a-service-descriptions-for-rest-metadata-services"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-yaml"><pre><span class="pl-ent">openapi</span>: <span class="pl-s">3.0.0</span>
<span class="pl-ent">info</span>:
  <span class="pl-ent">title</span>: <span class="pl-s">X-Road Service Metadata API for REST</span>
  <span class="pl-ent">version</span>: <span class="pl-s"><span class="pl-pds">'</span>0.3<span class="pl-pds">'</span></span>
<span class="pl-ent">servers</span>:
  - <span class="pl-ent">url</span>: <span class="pl-s">https://{securityserver}/r1</span>
    <span class="pl-ent">variables</span>:
      <span class="pl-ent">securityserver</span>:
        <span class="pl-ent">default</span>: <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>
        <span class="pl-ent">description</span>: <span class="pl-s"><span class="pl-pds">'</span>security server address<span class="pl-pds">'</span></span>
<span class="pl-ent">paths</span>:
  <span class="pl-ent">/{xRoadInstance}/{memberClass}/{memberCode}/{subsystemCode}/listMethods</span>:
    <span class="pl-ent">parameters</span>:
      - <span class="pl-ent">$ref</span>: <span class="pl-s"><span class="pl-pds">'</span>#/components/parameters/xRoadInstance<span class="pl-pds">'</span></span>
      - <span class="pl-ent">$ref</span>: <span class="pl-s"><span class="pl-pds">'</span>#/components/parameters/memberClass<span class="pl-pds">'</span></span>
      - <span class="pl-ent">$ref</span>: <span class="pl-s"><span class="pl-pds">'</span>#/components/parameters/memberCode<span class="pl-pds">'</span></span>
      - <span class="pl-ent">$ref</span>: <span class="pl-s"><span class="pl-pds">'</span>#/components/parameters/subsystemCode<span class="pl-pds">'</span></span>
    <span class="pl-ent">get</span>:
      <span class="pl-ent">tags</span>:
        - <span class="pl-s">metaservices</span>
      <span class="pl-ent">summary</span>: <span class="pl-s">List REST services and endpoints for a service provider</span>
      <span class="pl-ent">operationId</span>: <span class="pl-s">listMethods</span>
      <span class="pl-ent">parameters</span>:
        - <span class="pl-ent">name</span>: <span class="pl-s">serviceId</span>
          <span class="pl-ent">in</span>: <span class="pl-s">query</span>
          <span class="pl-ent">schema</span>:
            <span class="pl-ent">type</span>: <span class="pl-s">string</span>
        - <span class="pl-ent">name</span>: <span class="pl-s">X-Road-Client</span>
          <span class="pl-ent">in</span>: <span class="pl-s">header</span>
          <span class="pl-ent">schema</span>:
            <span class="pl-ent">type</span>: <span class="pl-s">string</span>
      <span class="pl-ent">responses</span>:
        <span class="pl-s"><span class="pl-pds">'</span><span class="pl-ent">200</span><span class="pl-pds">'</span></span>:
          <span class="pl-ent">description</span>: <span class="pl-s">List of REST services and endpoints for a service provider</span>
          <span class="pl-ent">content</span>:
            <span class="pl-ent">application/json</span>:
              <span class="pl-ent">schema</span>:
                <span class="pl-ent">$ref</span>: <span class="pl-s"><span class="pl-pds">'</span>#/components/schemas/restServiceDetailsListType<span class="pl-pds">'</span></span>
  <span class="pl-ent">/{xRoadInstance}/{memberClass}/{memberCode}/{subsystemCode}/allowedMethods</span>:
    <span class="pl-ent">parameters</span>:
      - <span class="pl-ent">$ref</span>: <span class="pl-s"><span class="pl-pds">'</span>#/components/parameters/xRoadInstance<span class="pl-pds">'</span></span>
      - <span class="pl-ent">$ref</span>: <span class="pl-s"><span class="pl-pds">'</span>#/components/parameters/memberClass<span class="pl-pds">'</span></span>
      - <span class="pl-ent">$ref</span>: <span class="pl-s"><span class="pl-pds">'</span>#/components/parameters/memberCode<span class="pl-pds">'</span></span>
      - <span class="pl-ent">$ref</span>: <span class="pl-s"><span class="pl-pds">'</span>#/components/parameters/subsystemCode<span class="pl-pds">'</span></span>
    <span class="pl-ent">get</span>:
      <span class="pl-ent">tags</span>:
        - <span class="pl-s">metaservices</span>
      <span class="pl-ent">summary</span>: <span class="pl-s">List of allowed REST services and endpoints for a service provider</span>
      <span class="pl-ent">operationId</span>: <span class="pl-s">allowedMethods</span>
      <span class="pl-ent">parameters</span>:
        - <span class="pl-ent">name</span>: <span class="pl-s">serviceId</span>
          <span class="pl-ent">in</span>: <span class="pl-s">query</span>
          <span class="pl-ent">schema</span>:
            <span class="pl-ent">type</span>: <span class="pl-s">string</span>
        - <span class="pl-ent">name</span>: <span class="pl-s">X-Road-Client</span>
          <span class="pl-ent">in</span>: <span class="pl-s">header</span>
          <span class="pl-ent">schema</span>:
            <span class="pl-ent">type</span>: <span class="pl-s">string</span>
      <span class="pl-ent">responses</span>:
        <span class="pl-s"><span class="pl-pds">'</span><span class="pl-ent">200</span><span class="pl-pds">'</span></span>:
          <span class="pl-ent">description</span>: <span class="pl-s">List of allowed REST services and endpoints for a service provider</span>
          <span class="pl-ent">content</span>:
            <span class="pl-ent">application/json</span>:
              <span class="pl-ent">schema</span>:
                <span class="pl-ent">$ref</span>: <span class="pl-s"><span class="pl-pds">'</span>#/components/schemas/restServiceDetailsListType<span class="pl-pds">'</span></span>
  <span class="pl-ent">/{xRoadInstance}/{memberClass}/{memberCode}/{subsystemCode}/getOpenAPI</span>:
    <span class="pl-ent">parameters</span>:
      - <span class="pl-ent">$ref</span>: <span class="pl-s"><span class="pl-pds">"</span>#/components/parameters/xRoadInstance<span class="pl-pds">"</span></span>
      - <span class="pl-ent">$ref</span>: <span class="pl-s"><span class="pl-pds">"</span>#/components/parameters/memberClass<span class="pl-pds">"</span></span>
      - <span class="pl-ent">$ref</span>: <span class="pl-s"><span class="pl-pds">"</span>#/components/parameters/memberCode<span class="pl-pds">"</span></span>
      - <span class="pl-ent">$ref</span>: <span class="pl-s"><span class="pl-pds">"</span>#/components/parameters/subsystemCode<span class="pl-pds">"</span></span>
    <span class="pl-ent">get</span>:
      <span class="pl-ent">tags</span>:
        - <span class="pl-s">metaservices</span>
      <span class="pl-ent">summary</span>: <span class="pl-s">Returns OpenAPI service description for a REST service</span>
      <span class="pl-ent">operationId</span>: <span class="pl-s">getOpenAPI</span>
      <span class="pl-ent">parameters</span>:
        - <span class="pl-ent">name</span>: <span class="pl-s">serviceCode</span>
          <span class="pl-ent">in</span>: <span class="pl-s">query</span>
          <span class="pl-ent">schema</span>:
            <span class="pl-ent">type</span>: <span class="pl-s">string</span>
        - <span class="pl-ent">name</span>: <span class="pl-s">X-Road-Client</span>
          <span class="pl-ent">in</span>: <span class="pl-s">header</span>
          <span class="pl-ent">schema</span>:
            <span class="pl-ent">type</span>: <span class="pl-s">string</span>
      <span class="pl-ent">responses</span>:
        <span class="pl-s"><span class="pl-pds">'</span><span class="pl-ent">200</span><span class="pl-pds">'</span></span>:
          <span class="pl-ent">description</span>: <span class="pl-s">OpenAPI description of the specified REST service</span>
          <span class="pl-ent">content</span>:
            <span class="pl-ent">application/json</span>:
              <span class="pl-ent">schema</span>:
                <span class="pl-ent">type</span>: <span class="pl-s">string</span>
            <span class="pl-ent">text/yaml</span>:
              <span class="pl-ent">schema</span>:
                <span class="pl-ent">type</span>: <span class="pl-s">string</span>
        <span class="pl-s"><span class="pl-pds">'</span><span class="pl-ent">400</span><span class="pl-pds">'</span></span>:
          <span class="pl-ent">description</span>: <span class="pl-s">Error in request</span>
        <span class="pl-s"><span class="pl-pds">'</span><span class="pl-ent">500</span><span class="pl-pds">'</span></span>:
          <span class="pl-ent">description</span>: <span class="pl-s">Internal error</span>
<span class="pl-ent">components</span>:
  <span class="pl-ent">parameters</span>:
    <span class="pl-ent">xRoadInstance</span>:
      <span class="pl-ent">name</span>: <span class="pl-s">xRoadInstance</span>
      <span class="pl-ent">required</span>: <span class="pl-c1">true</span>
      <span class="pl-ent">in</span>: <span class="pl-s">path</span>
      <span class="pl-ent">schema</span>:
        <span class="pl-ent">type</span>: <span class="pl-s">string</span>
    <span class="pl-ent">memberClass</span>:
      <span class="pl-ent">name</span>: <span class="pl-s">memberClass</span>
      <span class="pl-ent">required</span>: <span class="pl-c1">true</span>
      <span class="pl-ent">in</span>: <span class="pl-s">path</span>
      <span class="pl-ent">schema</span>:
        <span class="pl-ent">type</span>: <span class="pl-s">string</span>
    <span class="pl-ent">memberCode</span>:
      <span class="pl-ent">name</span>: <span class="pl-s">memberCode</span>
      <span class="pl-ent">required</span>: <span class="pl-c1">true</span>
      <span class="pl-ent">in</span>: <span class="pl-s">path</span>
      <span class="pl-ent">schema</span>:
        <span class="pl-ent">type</span>: <span class="pl-s">string</span>
    <span class="pl-ent">subsystemCode</span>:
      <span class="pl-ent">name</span>: <span class="pl-s">subsystemCode</span>
      <span class="pl-ent">required</span>: <span class="pl-c1">true</span>
      <span class="pl-ent">in</span>: <span class="pl-s">path</span>
      <span class="pl-ent">schema</span>:
        <span class="pl-ent">type</span>: <span class="pl-s">string</span>
  <span class="pl-ent">schemas</span>:
    <span class="pl-ent">restServiceDetailsListType</span>:
      <span class="pl-ent">type</span>: <span class="pl-s">object</span>
      <span class="pl-ent">properties</span>:
        <span class="pl-ent">member</span>:
          <span class="pl-ent">type</span>: <span class="pl-s">array</span>
          <span class="pl-ent">items</span>:
            <span class="pl-ent">$ref</span>: <span class="pl-s"><span class="pl-pds">'</span>#/components/schemas/xroadRestServiceDetailsType<span class="pl-pds">'</span></span>
    <span class="pl-ent">xroadRestServiceDetailsType</span>:
      <span class="pl-ent">type</span>: <span class="pl-s">object</span>
      <span class="pl-ent">properties</span>:
        <span class="pl-ent">objectType</span>:
          <span class="pl-ent">type</span>: <span class="pl-s">object</span>
          <span class="pl-ent">properties</span>:
            <span class="pl-ent">object_type</span>:
              <span class="pl-ent">type</span>: <span class="pl-s">string</span>
              <span class="pl-ent">enum</span>:
                - <span class="pl-s">MEMBER</span>
                - <span class="pl-s">SUBSYSTEM</span>
                - <span class="pl-s">SERVER</span>
                - <span class="pl-s">GLOBALGROUP</span>
                - <span class="pl-s">SERVICE</span>
                - <span class="pl-s">LOCALGROUP</span>
        <span class="pl-ent">serviceType</span>:
          <span class="pl-ent">type</span>: <span class="pl-s">string</span>
        <span class="pl-ent">xRoadInstance</span>:
          <span class="pl-ent">type</span>: <span class="pl-s">string</span>
        <span class="pl-ent">memberClass</span>:
          <span class="pl-ent">type</span>: <span class="pl-s">string</span>
        <span class="pl-ent">memberCode</span>:
          <span class="pl-ent">type</span>: <span class="pl-s">string</span>
        <span class="pl-ent">subsystemCode</span>:
          <span class="pl-ent">type</span>: <span class="pl-s">string</span>
        <span class="pl-ent">serviceCode</span>:
          <span class="pl-ent">type</span>: <span class="pl-s">string</span>
        <span class="pl-ent">serviceVersion</span>:
          <span class="pl-ent">type</span>: <span class="pl-s">string</span>
        <span class="pl-ent">endpointList</span>:
          <span class="pl-ent">type</span>: <span class="pl-s">object</span>
          <span class="pl-ent">properties</span>:
            <span class="pl-ent">member</span>:
              <span class="pl-ent">type</span>: <span class="pl-s">array</span>
              <span class="pl-ent">items</span>:
                <span class="pl-ent">$ref</span>: <span class="pl-s"><span class="pl-pds">'</span>#/components/schemas/endpoint<span class="pl-pds">'</span></span>
    <span class="pl-ent">endpoint</span>:
      <span class="pl-ent">type</span>: <span class="pl-s">object</span>
      <span class="pl-ent">properties</span>:
        <span class="pl-ent">method</span>:
          <span class="pl-ent">type</span>: <span class="pl-s">string</span>
        <span class="pl-ent">path</span>:
          <span class="pl-ent">type</span>: <span class="pl-s">string</span></pre></div>
<div class="markdown-heading"><h2 class="heading-element">Annex B Example Messages</h2><a id="annex-b-example-messages" class="anchor" aria-label="Permalink: Annex B Example Messages" href="#annex-b-example-messages"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="markdown-heading"><h3 class="heading-element">B.1 listMethods Response</h3><a id="b1-listmethods-response" class="anchor" aria-label="Permalink: B.1 listMethods Response" href="#b1-listmethods-response"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p><code>curl -H "accept: application/json" -H "X-Road-Client:INSTANCE/CLASS1/MEMBER1/SUBSYSTEM1" "https://SECURITYSERVER:443/r1/INSTANCE/CLASS2/MEMBER2/SUBSYSTEM2/listMethods"</code></p>
<div class="highlight highlight-source-json"><pre>{
  <span class="pl-ent">"service"</span>: [
    {
      <span class="pl-ent">"member_class"</span>: <span class="pl-s"><span class="pl-pds">"</span>CLASS2<span class="pl-pds">"</span></span>,
      <span class="pl-ent">"member_code"</span>: <span class="pl-s"><span class="pl-pds">"</span>MEMBER2<span class="pl-pds">"</span></span>,
      <span class="pl-ent">"object_type"</span>: <span class="pl-s"><span class="pl-pds">"</span>SERVICE<span class="pl-pds">"</span></span>,
      <span class="pl-ent">"service_code"</span>: <span class="pl-s"><span class="pl-pds">"</span>payloadgen<span class="pl-pds">"</span></span>,
      <span class="pl-ent">"service_type"</span>: <span class="pl-s"><span class="pl-pds">"</span>OPENAPI<span class="pl-pds">"</span></span>,
      <span class="pl-ent">"subsystem_code"</span>: <span class="pl-s"><span class="pl-pds">"</span>SUBSYSTEM2<span class="pl-pds">"</span></span>,
      <span class="pl-ent">"xroad_instance"</span>: <span class="pl-s"><span class="pl-pds">"</span>INSTANCE<span class="pl-pds">"</span></span>,
      <span class="pl-ent">"endpoint_list"</span>: [
        {
          <span class="pl-ent">"method"</span>: <span class="pl-s"><span class="pl-pds">"</span>PUT<span class="pl-pds">"</span></span>,
          <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>/pet<span class="pl-pds">"</span></span>
        },
        {
          <span class="pl-ent">"method"</span>: <span class="pl-s"><span class="pl-pds">"</span>POST<span class="pl-pds">"</span></span>,
          <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>/pet<span class="pl-pds">"</span></span>
        },
        {
          <span class="pl-ent">"method"</span>: <span class="pl-s"><span class="pl-pds">"</span>GET<span class="pl-pds">"</span></span>,
          <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>/pet/findByStatus<span class="pl-pds">"</span></span>
        },
        {
          <span class="pl-ent">"method"</span>: <span class="pl-s"><span class="pl-pds">"</span>GET<span class="pl-pds">"</span></span>,
          <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>/pet/findByTags<span class="pl-pds">"</span></span>
        },
        {
          <span class="pl-ent">"method"</span>: <span class="pl-s"><span class="pl-pds">"</span>GET<span class="pl-pds">"</span></span>,
          <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>/pet/*<span class="pl-pds">"</span></span>
        },
        {
          <span class="pl-ent">"method"</span>: <span class="pl-s"><span class="pl-pds">"</span>POST<span class="pl-pds">"</span></span>,
          <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>/pet/*<span class="pl-pds">"</span></span>
        },
        {
          <span class="pl-ent">"method"</span>: <span class="pl-s"><span class="pl-pds">"</span>DELETE<span class="pl-pds">"</span></span>,
          <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>/pet/*<span class="pl-pds">"</span></span>
        },
        {
          <span class="pl-ent">"method"</span>: <span class="pl-s"><span class="pl-pds">"</span>POST<span class="pl-pds">"</span></span>,
          <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>/pet/*/uploadImage<span class="pl-pds">"</span></span>
        },
        {
          <span class="pl-ent">"method"</span>: <span class="pl-s"><span class="pl-pds">"</span>GET<span class="pl-pds">"</span></span>,
          <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>/store/inventory<span class="pl-pds">"</span></span>
        },
        {
          <span class="pl-ent">"method"</span>: <span class="pl-s"><span class="pl-pds">"</span>POST<span class="pl-pds">"</span></span>,
          <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>/store/order<span class="pl-pds">"</span></span>
        },
        {
          <span class="pl-ent">"method"</span>: <span class="pl-s"><span class="pl-pds">"</span>GET<span class="pl-pds">"</span></span>,
          <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>/store/order/*<span class="pl-pds">"</span></span>
        },
        {
          <span class="pl-ent">"method"</span>: <span class="pl-s"><span class="pl-pds">"</span>DELETE<span class="pl-pds">"</span></span>,
          <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>/store/order/*<span class="pl-pds">"</span></span>
        },
        {
          <span class="pl-ent">"method"</span>: <span class="pl-s"><span class="pl-pds">"</span>POST<span class="pl-pds">"</span></span>,
          <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>/user<span class="pl-pds">"</span></span>
        },
        {
          <span class="pl-ent">"method"</span>: <span class="pl-s"><span class="pl-pds">"</span>POST<span class="pl-pds">"</span></span>,
          <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>/user/createWithList<span class="pl-pds">"</span></span>
        },
        {
          <span class="pl-ent">"method"</span>: <span class="pl-s"><span class="pl-pds">"</span>GET<span class="pl-pds">"</span></span>,
          <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>/user/login<span class="pl-pds">"</span></span>
        },
        {
          <span class="pl-ent">"method"</span>: <span class="pl-s"><span class="pl-pds">"</span>GET<span class="pl-pds">"</span></span>,
          <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>/user/logout<span class="pl-pds">"</span></span>
        },
        {
          <span class="pl-ent">"method"</span>: <span class="pl-s"><span class="pl-pds">"</span>GET<span class="pl-pds">"</span></span>,
          <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>/user/*<span class="pl-pds">"</span></span>
        },
        {
          <span class="pl-ent">"method"</span>: <span class="pl-s"><span class="pl-pds">"</span>PUT<span class="pl-pds">"</span></span>,
          <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>/user/*<span class="pl-pds">"</span></span>
        },
        {
          <span class="pl-ent">"method"</span>: <span class="pl-s"><span class="pl-pds">"</span>DELETE<span class="pl-pds">"</span></span>,
          <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>/user/*<span class="pl-pds">"</span></span>
        }
      ]
    },
    {
      <span class="pl-ent">"member_class"</span>: <span class="pl-s"><span class="pl-pds">"</span>CLASS2<span class="pl-pds">"</span></span>,
      <span class="pl-ent">"member_code"</span>: <span class="pl-s"><span class="pl-pds">"</span>MEMBER2<span class="pl-pds">"</span></span>,
      <span class="pl-ent">"object_type"</span>: <span class="pl-s"><span class="pl-pds">"</span>SERVICE<span class="pl-pds">"</span></span>,
      <span class="pl-ent">"service_code"</span>: <span class="pl-s"><span class="pl-pds">"</span>kore<span class="pl-pds">"</span></span>,
      <span class="pl-ent">"service_type"</span>: <span class="pl-s"><span class="pl-pds">"</span>REST<span class="pl-pds">"</span></span>,
      <span class="pl-ent">"subsystem_code"</span>: <span class="pl-s"><span class="pl-pds">"</span>SUBSYSTEM2<span class="pl-pds">"</span></span>,
      <span class="pl-ent">"xroad_instance"</span>: <span class="pl-s"><span class="pl-pds">"</span>INSTANCE<span class="pl-pds">"</span></span>,
      <span class="pl-ent">"endpoint_list"</span>: [
        {
          <span class="pl-ent">"method"</span>: <span class="pl-s"><span class="pl-pds">"</span>GET<span class="pl-pds">"</span></span>,
          <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>/school<span class="pl-pds">"</span></span>
        },
        {
          <span class="pl-ent">"method"</span>: <span class="pl-s"><span class="pl-pds">"</span>PUT<span class="pl-pds">"</span></span>,
          <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>/school<span class="pl-pds">"</span></span>
        },
        {
          <span class="pl-ent">"method"</span>: <span class="pl-s"><span class="pl-pds">"</span>POST<span class="pl-pds">"</span></span>,
          <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>/school<span class="pl-pds">"</span></span>
        }
      ]
    }
  ]
}</pre></div>
<div class="markdown-heading"><h3 class="heading-element">B.2 allowedMethods Response</h3><a id="b2-allowedmethods-response" class="anchor" aria-label="Permalink: B.2 allowedMethods Response" href="#b2-allowedmethods-response"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p><code>curl -H "accept: application/json" -H "X-Road-Client:INSTANCE/CLASS1/MEMBER1/SUBSYSTEM1" "https://SECURITYSERVER:443/r1/INSTANCE/CLASS2/MEMBER2/SUBSYSTEM2/allowedMethods"</code></p>
<div class="highlight highlight-source-json"><pre>{
  <span class="pl-ent">"service"</span>: [
    {
      <span class="pl-ent">"member_class"</span>: <span class="pl-s"><span class="pl-pds">"</span>CLASS2<span class="pl-pds">"</span></span>,
      <span class="pl-ent">"member_code"</span>: <span class="pl-s"><span class="pl-pds">"</span>MEMBER2<span class="pl-pds">"</span></span>,
      <span class="pl-ent">"object_type"</span>: <span class="pl-s"><span class="pl-pds">"</span>SERVICE<span class="pl-pds">"</span></span>,
      <span class="pl-ent">"service_code"</span>: <span class="pl-s"><span class="pl-pds">"</span>payloadgen<span class="pl-pds">"</span></span>,
      <span class="pl-ent">"service_type"</span>: <span class="pl-s"><span class="pl-pds">"</span>OPENAPI<span class="pl-pds">"</span></span>,
      <span class="pl-ent">"subsystem_code"</span>: <span class="pl-s"><span class="pl-pds">"</span>SUBSYSTEM2<span class="pl-pds">"</span></span>,
      <span class="pl-ent">"xroad_instance"</span>: <span class="pl-s"><span class="pl-pds">"</span>INSTANCE<span class="pl-pds">"</span></span>,
      <span class="pl-ent">"endpoint_list"</span>: [
        {
          <span class="pl-ent">"method"</span>: <span class="pl-s"><span class="pl-pds">"</span>GET<span class="pl-pds">"</span></span>,
          <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>/pet/findByStatus<span class="pl-pds">"</span></span>
        },
        {
          <span class="pl-ent">"method"</span>: <span class="pl-s"><span class="pl-pds">"</span>GET<span class="pl-pds">"</span></span>,
          <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>/pet/findByTags<span class="pl-pds">"</span></span>
        },
        {
          <span class="pl-ent">"method"</span>: <span class="pl-s"><span class="pl-pds">"</span>GET<span class="pl-pds">"</span></span>,
          <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>/pet/*<span class="pl-pds">"</span></span>
        }
      ]
    }
  ]
}</pre></div>
<div class="markdown-heading"><h3 class="heading-element">B.3 getOpenAPI Response</h3><a id="b3-getopenapi-response" class="anchor" aria-label="Permalink: B.3 getOpenAPI Response" href="#b3-getopenapi-response"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p><code>curl -H "accept: application/json" -H "X-Road-Client:INSTANCE/CLASS1/MEMBER1/SUBSYSTEM1" "https://SECURITYSERVER:443/r1/INSTANCE/CLASS2/MEMBER2/SUBSYSTEM2/getOpenAPI?serviceCode=listFirms"</code></p>
<div class="highlight highlight-source-yaml"><pre><span class="pl-ent">openapi</span>: <span class="pl-s"><span class="pl-pds">"</span>3.0.0<span class="pl-pds">"</span></span>
<span class="pl-ent">info</span>:
  <span class="pl-ent">version</span>: <span class="pl-s">1.0.0</span>
  <span class="pl-ent">title</span>: <span class="pl-s">Firm listing</span>
<span class="pl-ent">servers</span>:
  - <span class="pl-ent">url</span>: <span class="pl-s">https://example.com</span>
<span class="pl-ent">paths</span>:
  <span class="pl-ent">/firms</span>:
    <span class="pl-ent">get</span>:
      <span class="pl-ent">summary</span>: <span class="pl-s">List all firms</span>
      <span class="pl-ent">operationId</span>: <span class="pl-s">listFirms</span>
      <span class="pl-ent">tags</span>:
        - <span class="pl-s">firms</span>
      <span class="pl-ent">parameters</span>:
        - <span class="pl-ent">name</span>: <span class="pl-s">limit</span>
          <span class="pl-ent">in</span>: <span class="pl-s">query</span>
          <span class="pl-ent">description</span>: <span class="pl-s">How many items to return at one time (max 100)</span>
          <span class="pl-ent">required</span>: <span class="pl-c1">false</span>
          <span class="pl-ent">schema</span>:
            <span class="pl-ent">type</span>: <span class="pl-s">integer</span>
            <span class="pl-ent">format</span>: <span class="pl-s">int32</span>
      <span class="pl-ent">responses</span>:
        <span class="pl-s"><span class="pl-pds">'</span><span class="pl-ent">200</span><span class="pl-pds">'</span></span>:
          <span class="pl-ent">description</span>: <span class="pl-s">A paged array of firms</span>
          <span class="pl-ent">headers</span>:
            <span class="pl-ent">x-next</span>:
              <span class="pl-ent">description</span>: <span class="pl-s">A link to the next page of responses</span>
              <span class="pl-ent">schema</span>:
                <span class="pl-ent">type</span>: <span class="pl-s">string</span>
          <span class="pl-ent">content</span>:
            <span class="pl-ent">application/json</span>:
              <span class="pl-ent">schema</span>:
                <span class="pl-ent">$ref</span>: <span class="pl-s"><span class="pl-pds">"</span>#/components/schemas/Firms<span class="pl-pds">"</span></span>
        <span class="pl-ent">default</span>:
          <span class="pl-ent">description</span>: <span class="pl-s">unexpected error</span>
          <span class="pl-ent">content</span>:
            <span class="pl-ent">application/json</span>:
              <span class="pl-ent">schema</span>:
                <span class="pl-ent">$ref</span>: <span class="pl-s"><span class="pl-pds">"</span>#/components/schemas/Error<span class="pl-pds">"</span></span>
<span class="pl-ent">components</span>:
  <span class="pl-ent">schemas</span>:
    <span class="pl-ent">Firm</span>:
      <span class="pl-ent">required</span>:
        - <span class="pl-s">id</span>
        - <span class="pl-s">name</span>
        - <span class="pl-s">size</span>
        - <span class="pl-s">country</span>
      <span class="pl-ent">properties</span>:
        <span class="pl-ent">id</span>:
          <span class="pl-ent">type</span>: <span class="pl-s">integer</span>
          <span class="pl-ent">format</span>: <span class="pl-s">int64</span>
        <span class="pl-ent">name</span>:
          <span class="pl-ent">type</span>: <span class="pl-s">string</span>
        <span class="pl-ent">tag</span>:
          <span class="pl-ent">type</span>: <span class="pl-s">string</span>
    <span class="pl-ent">Firms</span>:
      <span class="pl-ent">type</span>: <span class="pl-s">array</span>
      <span class="pl-ent">items</span>:
        <span class="pl-ent">$ref</span>: <span class="pl-s"><span class="pl-pds">"</span>#/components/schemas/Firm<span class="pl-pds">"</span></span>
    <span class="pl-ent">Error</span>:
      <span class="pl-ent">required</span>:
        - <span class="pl-s">code</span>
        - <span class="pl-s">message</span>
      <span class="pl-ent">properties</span>:
        <span class="pl-ent">code</span>:
          <span class="pl-ent">type</span>: <span class="pl-s">integer</span>
          <span class="pl-ent">format</span>: <span class="pl-s">int32</span>
        <span class="pl-ent">message</span>:
          <span class="pl-ent">type</span>: <span class="pl-s">string</span></pre></div>
    </article>
  </body>
</html>
