<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="github-markdown.css">
    <style>
      .markdown-body {
        box-sizing: border-box;
        min-width: 200px;
        max-width: 980px;
        margin: 0 auto;
        padding: 45px;
      }
    </style>
    <title>X-Road: 7.4.2
</title>
  </head>
  <body>
    <article class="markdown-body">
<div class="markdown-heading"><h1 class="heading-element">SIGNER CONSOLE USER GUIDE 
</h1><a id="signer-console-user-guide-" class="anchor" aria-label="Permalink: SIGNER CONSOLE USER GUIDE " href="#signer-console-user-guide-"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p><strong>X-ROAD 7</strong></p>
<p>Version: 2.9<br>
Doc. ID: UG-SC</p>
<hr>
<div class="markdown-heading"><h2 class="heading-element">Version history 
</h2><a id="version-history-" class="anchor" aria-label="Permalink: Version history " href="#version-history-"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<table>
<thead>
<tr>
<th>Date</th>
<th>Version</th>
<th>Description</th>
<th>Author</th>
</tr>
</thead>
<tbody>
<tr>
<td>20.11.2014</td>
<td>0.1</td>
<td>First draft</td>
<td></td>
</tr>
<tr>
<td>20.11.2014</td>
<td>0.2</td>
<td>Some improvements done</td>
<td></td>
</tr>
<tr>
<td>01.12.2014</td>
<td>1.0</td>
<td>Minor corrections done</td>
<td></td>
</tr>
<tr>
<td>19.01.2015</td>
<td>1.1</td>
<td>License information added</td>
<td></td>
</tr>
<tr>
<td>02.04.2015</td>
<td>1.2</td>
<td>"sdsb" changed to "xroad"</td>
<td></td>
</tr>
<tr>
<td>30.06.2015</td>
<td>1.3</td>
<td>Minor corrections done</td>
<td></td>
</tr>
<tr>
<td>09.09.2015</td>
<td>2.0</td>
<td>Editorial changes made</td>
<td></td>
</tr>
<tr>
<td>14.09.2015</td>
<td>2.1</td>
<td>Audit log added</td>
<td></td>
</tr>
<tr>
<td>20.09.2015</td>
<td>2.2</td>
<td>Editorial changes made</td>
<td></td>
</tr>
<tr>
<td>06.09.2015</td>
<td>2.3</td>
<td>Added certificate request format argument</td>
<td></td>
</tr>
<tr>
<td>03.11.2015</td>
<td>2.4</td>
<td>Added label parameter for key generation command</td>
<td></td>
</tr>
<tr>
<td>10.12.2015</td>
<td>2.5</td>
<td>Editorial changes made</td>
<td></td>
</tr>
<tr>
<td>26.02.2021</td>
<td>2.6</td>
<td>Convert documentation to markdown</td>
<td>Caro Hautamäki</td>
</tr>
<tr>
<td>01.03.2021</td>
<td>2.7</td>
<td>Added <a href="#2419-update-software-token-pin">2.4.19 update-software-token-pin</a>
</td>
<td>Caro Hautamäki</td>
</tr>
<tr>
<td>25.08.2021</td>
<td>2.8</td>
<td>Update X-Road references from version 6 to 7</td>
<td>Caro Hautamäki</td>
</tr>
<tr>
<td>01.06.2023</td>
<td>2.9</td>
<td>Update references</td>
<td>Petteri Kivimäki</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h2 class="heading-element">Table of Contents 
</h2><a id="table-of-contents-" class="anchor" aria-label="Permalink: Table of Contents " href="#table-of-contents-"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>


<ul>
<li><a href="#license">License</a></li>
<li>
<a href="#1-introduction">1 Introduction</a>
<ul>
<li><a href="#11-references">1.1 References</a></li>
</ul>
</li>
<li>
<a href="#2-using-the-signer-console">2 Using the Signer console</a>
<ul>
<li><a href="#21-signer-console-options">2.1 Signer console options</a></li>
<li><a href="#22-starting-as-interactive-shell">2.2 Starting as interactive shell</a></li>
<li><a href="#23-executing-single-commands">2.3 Executing single commands</a></li>
<li>
<a href="#24-available-commands">2.4 Available commands</a>
<ul>
<li><a href="#241-list-tokens">2.4.1 list-tokens</a></li>
<li><a href="#242-list-keys">2.4.2 list-keys</a></li>
<li><a href="#243-list-certs">2.4.3 list-certs</a></li>
<li><a href="#244-set-token-friendly-name">2.4.4 set-token-friendly-name</a></li>
<li><a href="#245-set-key-friendly-name">2.4.5 set-key-friendly-name</a></li>
<li><a href="#246-get-member-certs">2.4.6 get-member-certs</a></li>
<li><a href="#247-activate-certificate">2.4.7 activate-certificate</a></li>
<li><a href="#248-deactivate-certificate">2.4.8 deactivate-certificate</a></li>
<li><a href="#249-delete-key">2.4.9 delete-key</a></li>
<li><a href="#2410-delete-certificate">2.4.10 delete-certificate</a></li>
<li><a href="#2411-delete-certificate-request">2.4.11 delete-certificate-request</a></li>
<li><a href="#2412-import-certificate">2.4.12 import-certificate</a></li>
<li><a href="#2413-login-token">2.4.13 login-token</a></li>
<li><a href="#2414-logout-token">2.4.14 logout-token</a></li>
<li><a href="#2415-init-software-token">2.4.15 init-software-token</a></li>
<li><a href="#2416-sign">2.4.16 sign</a></li>
<li><a href="#2417-generate-key">2.4.17 generate-key</a></li>
<li><a href="#2418-generate-cert-request">2.4.18 generate-cert-request</a></li>
<li><a href="#2419-update-software-token-pin">2.4.19 update-software-token-pin</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#3-example-certificate-import">3 Example: Certificate Import</a></li>
<li><a href="#4-audit-log">4 Audit log</a></li>
</ul>


<div class="markdown-heading"><h2 class="heading-element">License</h2><a id="license" class="anchor" aria-label="Permalink: License" href="#license"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>This document is licensed under the Creative Commons Attribution-ShareAlike 3.0 Unported License. To view a copy of this license, visit <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="nofollow">http://creativecommons.org/licenses/by-sa/3.0/</a></p>
<div class="markdown-heading"><h2 class="heading-element">1 Introduction</h2><a id="1-introduction" class="anchor" aria-label="Permalink: 1 Introduction" href="#1-introduction"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The purpose of this document is to explain how to manage keys and certificates in signer from the command line using the signer console utility.</p>
<p><em>Signer</em> is an X-Road component whose primary purpose is to process signing requests and produce signatures. Signer manages software and hardware (smart cards, HSMs) tokens and their keys and handles certificates associated with the keys.</p>
<p><em>Signer console</em> is a command line utility for interacting with Signer. The utility provides commands for various operations and can execute a single command or be started as an interactive text-based shell.</p>
<div class="markdown-heading"><h3 class="heading-element">1.1 References</h3><a id="11-references" class="anchor" aria-label="Permalink: 1.1 References" href="#11-references"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<ol>
<li>
<p><a id="Ref_SPEC-AL"></a>[SPEC-AL] X-Road: Audit log events. Document ID: <a href="../Architecture/spec-al_x-road_audit_log_events.html">SPEC-AL</a></p>
</li>
<li>
<p><a id="Ref_JSON"></a>[JSON] Introducing JSON, <a href="http://json.org/" rel="nofollow">http://json.org/</a></p>
</li>
</ol>
<div class="markdown-heading"><h2 class="heading-element">2 Using the Signer console</h2><a id="2-using-the-signer-console" class="anchor" aria-label="Permalink: 2 Using the Signer console" href="#2-using-the-signer-console"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="markdown-heading"><h3 class="heading-element">2.1 Signer console options</h3><a id="21-signer-console-options" class="anchor" aria-label="Permalink: 2.1 Signer console options" href="#21-signer-console-options"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Signer console accepts the following options:</p>
<ul>
<li>
<code>-h</code> or <code>-help</code> displays list of supported commands</li>
<li>
<code>-v</code> or <code>-verbose</code> displays more detailed execution output</li>
</ul>
<div class="markdown-heading"><h3 class="heading-element">2.2 Starting as interactive shell</h3><a id="22-starting-as-interactive-shell" class="anchor" aria-label="Permalink: 2.2 Starting as interactive shell" href="#22-starting-as-interactive-shell"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>To start the signer console as an interactive shell, type</p>
<div class="highlight highlight-source-shell"><pre>sudo -u xroad -i signer-console [<span class="pl-k">&lt;</span>options<span class="pl-k">&gt;</span>]</pre></div>
<div class="markdown-heading"><h3 class="heading-element">2.3 Executing single commands</h3><a id="23-executing-single-commands" class="anchor" aria-label="Permalink: 2.3 Executing single commands" href="#23-executing-single-commands"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>To execute a single command, type</p>
<div class="highlight highlight-source-shell"><pre>sudo -u xroad -i signer-console [<span class="pl-k">&lt;</span>options<span class="pl-k">&gt;</span>] <span class="pl-k">&lt;</span>command<span class="pl-k">&gt;</span> [<span class="pl-k">&lt;</span>command arguments<span class="pl-k">&gt;</span>]</pre></div>
<div class="markdown-heading"><h3 class="heading-element">2.4 Available commands</h3><a id="24-available-commands" class="anchor" aria-label="Permalink: 2.4 Available commands" href="#24-available-commands"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>This section gives an overview of all available commands in signer console.</p>
<p>A command may have one or more arguments, and may or may not produce any output. If command has arguments, they are always mandatory.</p>
<div class="markdown-heading"><h4 class="heading-element">2.4.1 list-tokens</h4><a id="241-list-tokens" class="anchor" aria-label="Permalink: 2.4.1 list-tokens" href="#241-list-tokens"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p><strong>Description:</strong> Lists all tokens.</p>
<p><strong>Arguments:</strong> (none)</p>
<p><strong>Output:</strong> List of all tokens, each line representing the following token information:</p>
<pre><code>&lt;id&gt; (&lt;status&gt;, &lt;read only|writable&gt;, &lt;available|unavailable&gt;, &lt;active|inactive&gt;)
</code></pre>
<div class="markdown-heading"><h4 class="heading-element">2.4.2 list-keys</h4><a id="242-list-keys" class="anchor" aria-label="Permalink: 2.4.2 list-keys" href="#242-list-keys"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p><strong>Description:</strong> Lists all keys on all tokens.</p>
<p><strong>Arguments:</strong> (none)</p>
<p><strong>Output:</strong> List of keys on all tokens, each line representing the following key information:</p>
<pre><code>&lt;id&gt; (&lt;usage&gt;, &lt;available|unavailable&gt;)
</code></pre>
<div class="markdown-heading"><h4 class="heading-element">2.4.3 list-certs</h4><a id="243-list-certs" class="anchor" aria-label="Permalink: 2.4.3 list-certs" href="#243-list-certs"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p><strong>Description:</strong> Lists all certificates and certificate requests on all keys.</p>
<p><strong>Arguments:</strong> (none)</p>
<p><strong>Output:</strong> List of certificates and certificate requests on all keys, each line representing the following</p>
<pre><code>&lt;id&gt; (&lt;status&gt;, &lt;client id&gt;)
</code></pre>
<div class="markdown-heading"><h4 class="heading-element">2.4.4 set-token-friendly-name</h4><a id="244-set-token-friendly-name" class="anchor" aria-label="Permalink: 2.4.4 set-token-friendly-name" href="#244-set-token-friendly-name"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p><strong>Description:</strong> Sets friendly name to the specified token.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li>
<em><strong>token id</strong></em>: the identifier of the token. Use <em><a href="#241-list-tokens">list-tokens</a></em> to look up token id-s.</li>
<li>
<em><strong>friendly name</strong></em>: the name to set.</li>
</ul>
<p><strong>Output:</strong> (none)</p>
<div class="markdown-heading"><h4 class="heading-element">2.4.5 set-key-friendly-name</h4><a id="245-set-key-friendly-name" class="anchor" aria-label="Permalink: 2.4.5 set-key-friendly-name" href="#245-set-key-friendly-name"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p><strong>Description:</strong> Sets friendly name to the specified key.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li>
<em><strong>key id</strong></em>: the identifier of the key. Use <em><a href="#242-list-keys">list-keys</a></em> to look up key id-s.</li>
<li>
<em><strong>friendly name</strong></em>: the name to set.</li>
</ul>
<p><strong>Output:</strong> (none)</p>
<div class="markdown-heading"><h4 class="heading-element">2.4.6 get-member-certs</h4><a id="246-get-member-certs" class="anchor" aria-label="Permalink: 2.4.6 get-member-certs" href="#246-get-member-certs"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p><strong>Description:</strong> Returns certificates of a member.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li>
<em><strong>member id</strong></em>: the identifier of the member, entered as <code>\"&lt;instance&gt; &lt;class&gt; &lt;code&gt;\"</code>
</li>
</ul>
<p><strong>Output:</strong> List of certificates of the specified member.</p>
<div class="markdown-heading"><h4 class="heading-element">2.4.7 activate-certificate</h4><a id="247-activate-certificate" class="anchor" aria-label="Permalink: 2.4.7 activate-certificate" href="#247-activate-certificate"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p><strong>Description:</strong> Activates the specified certificate.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li>
<em><strong>certificate id</strong></em>: the identifier of the certificate. Use <em><a href="#243-list-certs">list-certs</a></em> to look up certificate identifiers.</li>
</ul>
<p><strong>Output:</strong> (none)</p>
<div class="markdown-heading"><h4 class="heading-element">2.4.8 deactivate-certificate</h4><a id="248-deactivate-certificate" class="anchor" aria-label="Permalink: 2.4.8 deactivate-certificate" href="#248-deactivate-certificate"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p><strong>Description:</strong> Deactivates the specified certificate.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li>
<em><strong>certificate id</strong></em>: the identifier of the certificate. Use <em><a href="#243-list-certs">list-certs</a></em> to look up certificate identifiers.</li>
</ul>
<p><strong>Output:</strong> (none)</p>
<div class="markdown-heading"><h4 class="heading-element">2.4.9 delete-key</h4><a id="249-delete-key" class="anchor" aria-label="Permalink: 2.4.9 delete-key" href="#249-delete-key"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p><strong>Description:</strong> Deletes the specified key and all associated certificates and certificate requests.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li>
<em><strong>key id</strong></em>: the identifier of the key. Use <em><a href="#242-list-keys">list-keys</a></em> to look up key id-s.</li>
</ul>
<p><strong>Output:</strong> (none)</p>
<div class="markdown-heading"><h4 class="heading-element">2.4.10 delete-certificate</h4><a id="2410-delete-certificate" class="anchor" aria-label="Permalink: 2.4.10 delete-certificate" href="#2410-delete-certificate"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p><strong>Description:</strong> Deletes the specified certificate from Signer.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li>
<em><strong>certificate id</strong></em>: the identifier of the certificate. Use <em><a href="#243-list-certs">list-certs</a></em> to look up certificate identifiers.</li>
</ul>
<p><strong>Output:</strong> (none)</p>
<div class="markdown-heading"><h4 class="heading-element">2.4.11 delete-certificate-request</h4><a id="2411-delete-certificate-request" class="anchor" aria-label="Permalink: 2.4.11 delete-certificate-request" href="#2411-delete-certificate-request"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p><strong>Description:</strong> Lists all tokens.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li>
<em><strong>certificate request id</strong></em>: the identifier of the certificate request. Use <em><a href="#243-list-certs">list-certs</a></em> to look up certificate request identifiers.</li>
</ul>
<p><strong>Output:</strong> (none)</p>
<div class="markdown-heading"><h4 class="heading-element">2.4.12 import-certificate</h4><a id="2412-import-certificate" class="anchor" aria-label="Permalink: 2.4.12 import-certificate" href="#2412-import-certificate"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p><strong>Description:</strong> Imports a certificate from the specified file to a key. The certificate is imported to the key pair whose public key matches that of the certificate.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li>
<em><strong>file</strong></em>: the relative or absolute file name of the certificate in PEM or DER format.</li>
<li>
<em><strong>member id</strong></em>: the identifier of the member constructed from the C, O, CN fields of the certificates DN, entered as: <code>\"&lt;instance&gt; &lt;class&gt; &lt;code&gt;\"</code>
</li>
</ul>
<p><strong>Output:</strong> Identifier of the key to which the certificate was imported.</p>
<div class="markdown-heading"><h4 class="heading-element">2.4.13 login-token</h4><a id="2413-login-token" class="anchor" aria-label="Permalink: 2.4.13 login-token" href="#2413-login-token"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p><strong>Description:</strong> Log in to the specified token.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li>
<em><strong>token id</strong></em>: the identifier of the token. Use <em><a href="#241-list-tokens">list-tokens</a></em> to look up token identifiers.</li>
</ul>
<p><strong>Output:</strong> (none)</p>
<div class="markdown-heading"><h4 class="heading-element">2.4.14 logout-token</h4><a id="2414-logout-token" class="anchor" aria-label="Permalink: 2.4.14 logout-token" href="#2414-logout-token"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p><strong>Description:</strong> Log out of the specified token</p>
<p><strong>Arguments:</strong></p>
<ul>
<li>
<em><strong>token id</strong></em>: the identifier of the token. Use <em><a href="#241-list-tokens">list-tokens</a></em> to look up token identifiers.</li>
</ul>
<p><strong>Output:</strong> (none)</p>
<div class="markdown-heading"><h4 class="heading-element">2.4.15 init-software-token</h4><a id="2415-init-software-token" class="anchor" aria-label="Permalink: 2.4.15 init-software-token" href="#2415-init-software-token"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p><strong>Description:</strong> Initialize the software token. A PIN is prompted that is used to log in to this token.</p>
<p><strong>Arguments:</strong> (none)</p>
<p><strong>Output:</strong> (none)</p>
<div class="markdown-heading"><h4 class="heading-element">2.4.16 sign</h4><a id="2416-sign" class="anchor" aria-label="Permalink: 2.4.16 sign" href="#2416-sign"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p><strong>Description:</strong> Sign the specified character data using the specified key.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li>
<em><strong>key id</strong></em>: the identifier of the key. Use <em><a href="#242-list-keys">list-keys</a></em> to look up key identifiers.</li>
<li>
<em><strong>data</strong></em>: character data to be signed as string</li>
</ul>
<p><strong>Output:</strong> signature byte array</p>
<div class="markdown-heading"><h4 class="heading-element">2.4.17 generate-key</h4><a id="2417-generate-key" class="anchor" aria-label="Permalink: 2.4.17 generate-key" href="#2417-generate-key"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p><strong>Description:</strong> Generates a key on the specified token.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li>
<em><strong>token id</strong></em>: the identifier of the token. Use <em><a href="#241-list-tokens">list-tokens</a></em> to look up token identifiers.</li>
<li>
<em><strong>label</strong></em>: the label of the key is set for SSCD devices.</li>
</ul>
<p><strong>Output:</strong> The id of the generated key.</p>
<div class="markdown-heading"><h4 class="heading-element">2.4.18 generate-cert-request</h4><a id="2418-generate-cert-request" class="anchor" aria-label="Permalink: 2.4.18 generate-cert-request" href="#2418-generate-cert-request"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p><strong>Description:</strong> Generates a certificate request under the specified key in Signer and saves it to a CSR file in current directory.</p>
<p><strong>Arguments:</strong></p>
<ul>
<li>
<em><strong>key id</strong></em>: the identifier of the key. Use <em><a href="#242-list-keys">list-keys</a></em> to look up key identifiers.</li>
<li>
<em><strong>member id</strong></em>: the identifier of the member that matches the subject name, entered as: <code>\"&lt;instance&gt; &lt;class&gt; &lt;code&gt;\"</code>
</li>
<li>
<em><strong>usage</strong></em>: key usage – either <code>s</code> (sign) or <code>a</code> (authentication)</li>
<li>
<em><strong>subject name</strong></em>: the subject distinguished name, entered as: <code>C=&lt;instance&gt;,O=&lt;class&gt;,CN=&lt;code&gt;</code>
</li>
<li>
<em><strong>format</strong></em>: the format of the generated certificate request – either <code>der</code> or <code>pem</code>
</li>
</ul>
<p><strong>Output:</strong> Name of the file where the certificate request was saved.</p>
<div class="markdown-heading"><h4 class="heading-element">2.4.19 update-software-token-pin</h4><a id="2419-update-software-token-pin" class="anchor" aria-label="Permalink: 2.4.19 update-software-token-pin" href="#2419-update-software-token-pin"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p><strong>Description:</strong> Updates the software token's PIN code. First, the current PIN is prompted and after that the new PIN is prompted twice.</p>
<p><strong>Arguments:</strong> (none)</p>
<p><strong>Output:</strong> (none)</p>
<div class="markdown-heading"><h2 class="heading-element">3 Example: Certificate Import</h2><a id="3-example-certificate-import" class="anchor" aria-label="Permalink: 3 Example: Certificate Import" href="#3-example-certificate-import"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The following usage example shows how to initialize a software token and import a certificate to signer.</p>
<ol>
<li>
<p>Initialize the software token</p>
<div class="highlight highlight-source-shell"><pre>signer-console init-software-token</pre></div>
<p>A PIN is prompted, this will be used to log in to the software token afterwards.</p>
</li>
<li>
<p>Log in to the software token</p>
<div class="highlight highlight-source-shell"><pre>signer-console login-token 0</pre></div>
<p>Note, that the identifier of software token is always <code>0</code>.</p>
</li>
<li>
<p>Generate a new key on the software token:</p>
<div class="highlight highlight-source-shell"><pre>signer-console generate-key 0</pre></div>
<p>Output is key id:
<code>F30D41B745FC072028956A3E9695416247248595</code></p>
</li>
<li>
<p>Create a certificate request:</p>
<div class="highlight highlight-source-shell"><pre>signer-console generate-cert-request F30D41B745FC072028956A3E9695416247248595 <span class="pl-cce">\"</span>FOO BAR BAZ<span class="pl-cce">\"</span> s <span class="pl-s"><span class="pl-pds">"</span>C=FOO,O=BAR,CN=BAZ<span class="pl-pds">"</span></span> pem</pre></div>
<p>Output:
<code>Saved to file F30D41B745FC072028956A3E9695416247248595.csr</code></p>
</li>
<li>
<p>Send the CSR to the Certificate Authority and get the certificate.</p>
</li>
<li>
<p>Import the new certificate to signer</p>
<div class="highlight highlight-source-shell"><pre>signer-console import-certificate <span class="pl-k">&lt;</span>PEM file<span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>SAVED<span class="pl-pds">"</span></span> <span class="pl-cce">\"</span>FOO BAR BAZ<span class="pl-cce">\"</span></pre></div>
</li>
</ol>
<div class="markdown-heading"><h2 class="heading-element">4 Audit log</h2><a id="4-audit-log" class="anchor" aria-label="Permalink: 4 Audit log" href="#4-audit-log"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>User actions events that are made by the signer-console utility and that change the system state or configuration are logged to the audit log. The actions are logged regardless of whether the outcome was a success or a failure. The complete list of the audit log events is described in [<a href="#Ref_SPEC-AL">SPEC-AL</a>].</p>
<p>An audit log record contains</p>
<ul>
<li>the description of the user action,</li>
<li>the date and time of the event,</li>
<li>the user name of the user performing the action, and</li>
<li>the data related to the event.</li>
</ul>
<p>For example, logging in to the token produces the following log record:</p>
<pre><code>2015-09-14T17:41:28+03:00 my-server-host INFO  [X-Road Signer Console] 2015-09-14 17:41:28+0300 - {"event":"Log into the token","user":"xroad","data":{"tokenId":"0"}}
</code></pre>
<p>The event is present in [<a href="#Ref_JSON">JSON</a>] format, in order to ensure machine processability. The field <code>event</code> represents the description of the event, the field <code>user</code> represents the user name of the performer, and the field <code>data</code> represents data related with the event. The failed action event record contains an additional field <code>reason</code> for the error message.</p>
<p>For example:</p>
<pre><code>2015-09-14T17:43:07+03:00 my-server-host INFO  [X-Road Signer Console] 2015-09-14 17:43:07+0300 - {"event":"Log into the token failed","user":"xroad","reason":"Signer.PinIncorrect: PIN incorrect","data":{"tokenId":"0"}}
</code></pre>
<p>By default, in the X-Road security server and central server, audit log is located in the file
<code>/var/log/xroad/audit.log</code></p>
    </article>
  </body>
</html>
